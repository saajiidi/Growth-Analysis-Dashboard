<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>WPPOOL Growth Analytics | Dashboard</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="style.css">
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
        <div class="dashboard-container">
                <header>
                        <div class="header-content" style="display: flex; align-items: center; gap: 1rem;">
                                <img src="logo.svg" alt="Logo" style="width: 50px; height: 50px;">
                                <div>
                                        <h1>WPPOOL Growth Analytics</h1>
                                        <div style="font-size: 0.9rem; color: var(--text-secondary);">Enterprise Metrics
                                                Dashboard</div>
                                </div>
                        </div>
                        <div class="header-controls">
                                <a href="profile_report.html" class="btn" target="_blank">Full Data Profile</a>
                                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle Dark Mode">
                                        <span>‚òÄÔ∏è</span>
                                </button>
                        </div>
                </header>

                <!-- KPI Metrics -->
                <section class="summary-section">
                        <div class="summary-grid">
                                <div class="metric-card">
                                        <h3>Total Users</h3>
                                        <div class="value">20,000</div>
                                        <div style="font-size: 0.8rem; color: #10b981; margin-top: 5px;">‚Üë 4.2% since
                                                last month</div>
                                </div>
                                <div class="metric-card">
                                        <h3>Pro Conversion</h3>
                                        <div class="value">20.14%</div>
                                        <div style="font-size: 0.8rem; color: #10b981; margin-top: 5px;">‚Üë 1.4%
                                                improvement</div>
                                </div>
                                <div class="metric-card">
                                        <h3>Monthly Revenue</h3>
                                        <div class="value">$235,481</div>
                                        <div style="font-size: 0.8rem; color: #6366f1; margin-top: 5px;">$11.77 ARPU
                                        </div>
                                </div>
                                <div class="metric-card">
                                        <h3>Churn Rate</h3>
                                        <div class="value">9.6%</div>
                                        <div style="font-size: 0.8rem; color: #ef4444; margin-top: 5px;">‚Üì 0.5%
                                                reduction</div>
                                </div>
                        </div>
                </section>

                <!-- AI Predictive Insights -->
                <section class="charts-section">
                        <h2>ü§ñ AI Predictive Insights</h2>
                        <div class="summary-grid">
                                <div class="metric-card" style="border-left: 4px solid #6366f1;">
                                        <h3>Predicted Persona</h3>
                                        <div class="value" style="font-size: 1.4rem;">Loyal Fans (42%)</div>
                                        <p style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 10px;">
                                                Users with >100 days active and consistent session growth.
                                        </p>
                                </div>
                                <div class="metric-card" style="border-left: 4px solid #f43f5e;">
                                        <h3>Next-Month Churn Risk</h3>
                                        <div class="value" style="font-size: 1.4rem;">High (12.4%)</div>
                                        <p style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 10px;">
                                                Clusters identifying low-engagement free users in high-competition
                                                regions.
                                        </p>
                                </div>
                                <div class="metric-card" style="border-left: 4px solid #10b981;">
                                        <h3>Upsell Probability</h3>
                                        <div class="value" style="font-size: 1.4rem;">65% Increase</div>
                                        <p style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 10px;">
                                                Likelihood of 'Standard' users upgrading if personalized discounts are
                                                applied.
                                        </p>
                                </div>
                        </div>
                </section>

                <!-- Main Charts Section -->
                <section class="charts-section">
                        <h2>üìä Core Performance Metrics</h2>
                        <div class="charts-wrapper">
                                <!-- Revenue Distribution -->
                                <div class="chart-card">
                                        <h3>Revenue by Pro Plan Type</h3>
                                        <div id="revenue-pie-chart" style="height: 400px;"></div>
                                </div>

                                <!-- Avg Sessions -->
                                <div class="chart-card">
                                        <h3>Average Sessions (Free vs Pro)</h3>
                                        <div id="engagement-bar-chart" style="height: 400px;"></div>
                                </div>

                                <!-- Global Revenue Map -->
                                <div class="chart-card full-width">
                                        <h3>Global Revenue Distribution</h3>
                                        <div id="global-revenue-map" style="height: 500px;"></div>
                                </div>
                        </div>
                </section>

                <!-- Insights Snippets (Static copy of Streamlit logic) -->
                <section class="charts-section">
                        <h2>üí° Strategic Insights</h2>
                        <div class="summary-grid">
                                <div class="metric-card">
                                        <h3>Churn Predictor</h3>
                                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 10px;">
                                                Users inactive for more than 7 days have a <strong>68%</strong> higher
                                                probability of churning next month.
                                        </p>
                                </div>
                                <div class="metric-card">
                                        <h3>Market Growth</h3>
                                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 10px;">
                                                Germany and Canada show the highest CLV, representing
                                                <strong>42%</strong> of total new Pro revenue.
                                        </p>
                                </div>
                                <div class="metric-card">
                                        <h3>Upsell Funnel</h3>
                                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 10px;">
                                                The 'Standard' plan onboarding flow is currently the primary bottleneck
                                                for Enterprise conversions.
                                        </p>
                                </div>
                        </div>
                </section>

                <footer>
                        &copy; 2026 WPPOOL Growth Engineering. Built with Plotly.js & Python.
                </footer>
        </div>

        <!-- External Script -->
        <script src="script.js"></script>

        <!-- Chart Configuration Script -->
        <script>
                document.addEventListener('DOMContentLoaded', function () {
                        // Chart 1: Revenue Pie
                        const revenueData = [{
                                values: [85000, 42000, 108481],
                                labels: ['Enterprise', 'Standard', 'Basic'],
                                type: 'pie',
                                hole: 0.5,
                                marker: {
                                        colors: ['#6366f1', '#a5b4fc', '#e0e7ff']
                                }
                        }];
                        const pieLayout = {
                                margin: { t: 0, b: 0, l: 0, r: 0 },
                                paper_bgcolor: 'rgba(0,0,0,0)',
                                plot_bgcolor: 'rgba(0,0,0,0)',
                                legend: { orientation: 'h', y: -0.1 }
                        };
                        Plotly.newPlot('revenue-pie-chart', revenueData, pieLayout, { responsive: true });

                        // Chart 2: Engagement Bar
                        const engagementData = [{
                                x: ['Free Users', 'Pro Users'],
                                y: [45.2, 78.4],
                                type: 'bar',
                                marker: {
                                        color: ['#cfd1ff', '#6366f1']
                                }
                        }];
                        const barLayout = {
                                margin: { t: 20, b: 40, l: 40, r: 20 },
                                paper_bgcolor: 'rgba(0,0,0,0)',
                                plot_bgcolor: 'rgba(0,0,0,0)',
                                font: { family: 'Inter' }
                        };
                        Plotly.newPlot('engagement-bar-chart', engagementData, barLayout, { responsive: true });

                        // Chart 3: Global Map (Chloropleth)
                        const mapData = [{
                                type: 'choropleth',
                                locationmode: 'country names',
                                locations: ['USA', 'Germany', 'Canada', 'India', 'France', 'UK', 'Australia'],
                                z: [95000, 45000, 38000, 22000, 18000, 12000, 5000],
                                text: ['Highest Revenue', 'Key Market', 'Growth Market', 'Emerging', 'Stable', 'Stable', 'New'],
                                colorscale: 'Viridis',
                                autocolorscale: false,
                                reversescale: true,
                                marker: { line: { color: 'rgb(180,180,180)', width: 0.5 } }
                        }];
                        const mapLayout = {
                                geo: {
                                        showframe: false,
                                        showcoastlines: false,
                                        projection: { type: 'equirectangular' },
                                        bgcolor: 'rgba(0,0,0,0)'
                                },
                                margin: { t: 0, b: 0, l: 0, r: 0 },
                                paper_bgcolor: 'rgba(0,0,0,0)'
                        };
                        Plotly.newPlot('global-revenue-map', mapData, mapLayout, { responsive: true });
                });
        </script>
</body>

</html>